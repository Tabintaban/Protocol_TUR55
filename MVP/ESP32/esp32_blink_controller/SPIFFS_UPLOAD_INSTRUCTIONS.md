# Инструкция по загрузке файлов в SPIFFS

## Подготовка

Для загрузки файлов в SPIFFS память ESP32 вам понадобится:

1. Arduino IDE с установленной поддержкой ESP32
2. Плагин для загрузки файлов в SPIFFS (ESP32 Sketch Data Upload)

## Установка плагина для загрузки SPIFFS

1. Скачайте плагин из репозитория: https://github.com/me-no-dev/arduino-esp32fs-plugin
2. Скопируйте папку `tools` в директорию вашей установки Arduino IDE (рядом с папками `hardware`, `libraries` и т.д.)
3. Перезапустите Arduino IDE

## Подготовка файлов

1. Убедитесь, что все файлы для загрузки находятся в папке `data` в вашем проекте
2. В нашем случае это файлы:
   - `config.json` - конфигурационный файл с параметрами мигания
   - `index.html` - основная HTML страница веб-интерфейса
   - `style.css` - CSS стили веб-интерфейса
   - `script.js` - JavaScript код веб-интерфейса
3. Папка `data` должна находиться в той же директории, что и файл скетча `.ino`

## Загрузка файлов

1. Откройте Arduino IDE
2. Загрузите скетч `esp32_blink_controller.ino`
3. Перейдите в меню `Инструменты` → `ESP32 Sketch Data Upload`
4. Дождитесь завершения процесса загрузки файлов в SPIFFS

## Альтернативный способ: Использование утилиты mkspiffs

1. Установите утилиту mkspiffs
2. Создайте образ файловой системы:
   ```bash
   mkspiffs -c data -b 4096 -p 256 -s 0x100000 spiffs.bin
   ```
3. Загрузите образ в ESP32:
   ```bash
   esptool.py --port PORT write_flash 0x300000 spiffs.bin
   ```

## Проверка загрузки

После загрузки файлов в SPIFFS и прошивки скетча, вы можете проверить наличие файла следующим образом:

1. Откройте Serial Monitor (скорость 115200)
2. Загрузите скетч на ESP32
3. В Serial Monitor должны появиться сообщения о успешной загрузке конфигурации

## Возможные ошибки

- `SPIFFS initialization failed` - ошибка инициализации файловой системы
- `Failed to open config.json` - файл не найден или поврежден
- `Failed to format SPIFFS` - не удалось отформатировать файловую систему

В случае ошибок попробуйте:
1. Перезагрузить ESP32
2. Проверить целостность файлов в папке `data`
3. Повторить загрузку файлов в SPIFFS