# ESP32 Blink Controller

## Описание

ESP32 Blink Controller - это проект, который позволяет управлять светодиодом на плате ESP32 через веб-интерфейс на мобильном телефоне. Устройство работает 3 минуты по заданной в конфигурационном файле последовательности миганий, после чего автоматически останавливается.

## Функциональность

- Чтение параметров мигания из файла config.json, хранящегося в SPIFFS
- Веб-интерфейс для управления с мобильного телефона
- Кнопка "Проверить состояние" - проверяет наличие config.json
- Кнопка "Старт/Стоп" - запускает и останавливает мигание по параметрам config.json
- Таймер 3 минут - автоматическая остановка мигания по истечении времени
- Отображение сообщения "Время жизни истекло" после окончания работы

## Требования

- Плата ESP32
- Arduino IDE с установленной поддержкой ESP32
- Библиотеки:
  - WiFi.h
  - WebServer.h
  - SPIFFS.h
 - ArduinoJson.h

## Установка

1. Загрузите файл `data/config.json` в SPIFFS память ESP32
2. Загрузите скетч `esp32_blink_controller.ino` в ESP32
3. Подключите телефон к WiFi сети "ESP32_Blink_Controller" с паролем "123456789"
4. Откройте браузер и перейдите по адресу http://192.168.4.1

## Использование

1. После подключения к ESP32 откройте веб-интерфейс по адресу http://192.168.4.1
2. Нажмите кнопку "Проверить состояние" для проверки наличия и валидности config.json
3. При наличии валидного конфига кнопка "Старт/Стоп" станет активной
4. Нажмите "Старт" для начала мигания по параметрам из config.json
5. Наблюдайте за миганием и таймером обратного отсчета
6. После 3 минут работы мигание автоматически остановится и появится сообщение "Время жизни истекло"

## Конфигурация

Файл `config.json` содержит:
- `sequence` - массив с параметрами мигания (LOW и HIGH длительности в миллисекундах)
- `duration` - общая длительность работы в секундах (180 секунд = 3 минуты)

Пример:
```json
{
  "sequence": [
    {
      "LOW": 200,
      "HIGH": 500
    },
    {
      "LOW": 500,
      "HIGH": 500
    }
  ],
 "duration": 180
}
```

## Архитектура

Проект состоит из следующих компонентов:

1. **ESP32 скетч** - реализует:
   - Чтение config.json из SPIFFS
   - Управление встроенным светодиодом
   - Создание WiFi точки доступа
   - Веб-сервер для обработки HTTP запросов
   - Таймер 3 минут
   - API endpoints для веб-интерфейса

2. **Веб-интерфейс** - реализует:
   - Проверку состояния ESP32
   - Управление миганием (старт/стоп)
   - Отображение таймера обратного отсчета
   - Отображение сообщения "Время жизни истекло"

## API Endpoints

- `GET /api/check-config` - проверка наличия и валидности config.json
- `POST /api/control` - управление миганием (старт/стоп)
- `GET /api/timer-status` - получение состояния таймера
- `GET /` - веб-интерфейс

## Файловая структура

```
MVP/ESP32/
├── esp32_blink_controller.ino     # Основной скетч
├── data/
│   └── config.json               # Конфигурационный файл
├── esp32_sketch_architecture.md  # Архитектура скетча
├── web_interface_architecture.md # Архитектура веб-интерфейса
├── config_check_functionality.md # Функционал проверки конфига
├── start_stop_functionality.md   # Функционал старт/стоп
├── timer_implementation.md       # Реализация таймера
├── wifi_integration.md          # Интеграция WiFi
└── testing_debugging.md         # Тестирование и отладка